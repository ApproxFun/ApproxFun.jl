<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Constructors · ApproxFun.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.5.0/styles/default.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Ubuntu+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../../versions.js"></script></head><body><nav class="toc"><a href="../index.html"><img class="logo" src="../assets/logo.png" alt="ApproxFun.jl logo"/></a><h1>ApproxFun.jl</h1><form class="search" action="../search.html"><select id="version-selector" onChange="window.location.href=this.value"><option value="#" selected="selected" disabled="disabled">Version</option></select><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../index.html">Home</a></li><li><span class="toctext">Usage</span><ul><li><a class="toctext" href="domains.html">Domains</a></li><li><a class="toctext" href="spaces.html">Spaces</a></li><li class="current"><a class="toctext" href="constructors.html">Constructors</a><ul class="internal"><li><a class="toctext" href="#Convenience-constructors-1">Convenience constructors</a></li><li><a class="toctext" href="#Specifying-coefficients-explicitly-1">Specifying coefficients explicitly</a></li><li><a class="toctext" href="#Using-ApproxFun-for-“manual”-interpolation-1">Using ApproxFun for “manual” interpolation</a></li></ul></li></ul></li><li><a class="toctext" href="../faq.html">Frequently Asked Questions</a></li><li><a class="toctext" href="../library.html">Library</a></li></ul></nav><article id="docs"><header><nav><ul><li>Usage</li><li><a href="constructors.html">Constructors</a></li></ul><a class="edit-page" href="https://github.com/ApproxFun/ApproxFun.jl/tree/c79a4d803fe805ac18cc4aa7c899435de7b3bf5d/docs/src/usage/constructors.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/></header><h1><a class="nav-anchor" id="Constructors-1" href="#Constructors-1">Constructors</a></h1><p><code>Fun</code>s in ApproxFun are instances of Julia types with one field to store coefficients and another to describe the function space. Similarly, each function space has one field describing its domain, or another function space. Let&#39;s explore:</p><pre><code class="language-julia">x = Fun(identity,-1..1)
f = exp(x)
g = f/sqrt(1-x^2)
space(f)   # Chebyshev(Interval(-1.0,1.0))
space(g)   # JacobiWeight(-0.5,-0.5,Interval(-1.0,1.0))</code></pre><p>The absolute value is another case where the space of the output is inferred from the operation:</p><pre><code class="language-julia">f = Fun(x-&gt;cospi(5x),-1..1)
g = abs(f)
space(f)   # Chebyshev(Interval(-1.0,1.0))
space(g)   # PiecewiseSpace((Chebyshev(Interval(-1.0,-0.9)),...))</code></pre><h2><a class="nav-anchor" id="Convenience-constructors-1" href="#Convenience-constructors-1">Convenience constructors</a></h2><p>The default space is <code>Chebyshev</code>, which can represent non-periodic functions on intervals.  Each <code>Space</code> type has a default domain: for <code>Chebyshev</code> this is <code>-1..1</code>, for Fourier and Laurent this is <code>-π..π</code>.  Thus the following are synonyms:</p><pre><code class="language-julia">Fun(exp,Chebyshev(Interval(-1,1)))
Fun(exp,Chebyshev(Interval()))
Fun(exp,Chebyshev(-1..1))
Fun(exp,Chebyshev())
Fun(exp,-1..1)
Fun(exp,Interval())
Fun(exp,Interval(-1,1))
Fun(exp)</code></pre><p>If a function is not specified, then it is taken to be <code>identity</code>.  Thus we have the following synonyms:</p><pre><code class="language-julia">x = Fun(identity,-1..1)
x = Fun(-1..1)
x = Fun(identity)
x = Fun()</code></pre><h2><a class="nav-anchor" id="Specifying-coefficients-explicitly-1" href="#Specifying-coefficients-explicitly-1">Specifying coefficients explicitly</a></h2><p>It is sometimes necessary to specify coefficients explicitly.  This is possible via specifying the space followed by a vector of coefficients:</p><pre><code class="language-julia">f = Fun(Taylor(),[1,2,3])  # represents 1 + 2z + 3z^2</code></pre><h2><a class="nav-anchor" id="Using-ApproxFun-for-“manual”-interpolation-1" href="#Using-ApproxFun-for-“manual”-interpolation-1">Using ApproxFun for “manual” interpolation</a></h2><p>The ApproxFun package for Julia implements all of the necessary operations for Chebyshev interpolation and operations (like differentiation or integration) on Chebyshev interpolants.</p><p>Normally, you give it a function f and a domain d, and construct the Chebyshev interpolant by <code>fc = Fun(f, d)</code>. The ApproxFun package figures out the necessary number of Chebyshev points (i.e., the polynomial order) required to interpolate f to nearly machine precision, so that subsequent operations on fc can be viewed as &quot;exact&quot;.</p><p>However, in cases where the function to be interpolated is extremely expensive, and possibly even is evaluated by an external program, it is convenient to be able to decide on the desired Chebyshev order in advance, evaluate the function at those points &quot;manually&quot;, and then construct the Chebyshev interpolant. However, this procedure isn&#39;t documented in the ApproxFun manual. In this notebook, we show how to do that for the example <code>f(x) = exp(2x)</code> on the domain <code>0..1</code>.</p><h3><a class="nav-anchor" id="Manually-constructing-the-Chebyshev-interpolant-1" href="#Manually-constructing-the-Chebyshev-interpolant-1">Manually constructing the Chebyshev interpolant</a></h3><pre><code class="language-julia">using ApproxFun
f(x) = exp(2x) # the function to be interpolated
d = Space(0..1) # the domain to interpolate in</code></pre><p>Let&#39;s interpolate using only <code>N = 10</code> points. We&#39;ll start by using the ApproxFun.points function to get the x coordinates to interpolate at:</p><pre><code class="language-julia">N = 10
x = points(d, N)
10-element Array{Float64,1}:
 0.00615583
 0.0544967
 0.146447
 0.273005
 0.421783
 0.578217
 0.726995
 0.853553
 0.945503
 0.993844</code></pre><p>Note that these are Chebyshev points, clustered near the endpoints of the domain.</p><p>Next, we&#39;ll evaluate our function f at these points:</p><pre><code class="language-julia">y = f(x)
10-element Array{Float64,1}:
 1.01239
 1.11516
 1.3403
 1.72635
 2.32464
 3.17858
 4.28016
 5.51299
 6.62603
 7.29864</code></pre><p>Finally, we&#39;ll construct the Chebyshev interpolant fc by using the lowest-level Fun constructor, where we pass in an array of Chebyshev coefficients along with the domain. To get the Chebyshev coefficients, we&#39;ll use the ApproxFun.transform method:</p><pre><code class="language-julia">fc = Fun(ApproxFun.transform(d, y), d)
Fun([3.441523869125335,3.0725234451419356,0.7380008479667985,0.12052005327473987,0.01488052831835938,0.0014758267278678237,0.00012226103967574454,8.694251606738979e-6,5.415128415009462e-7,2.993315462163082e-8],Chebyshev(【0.0,1.0】))</code></pre><h3><a class="nav-anchor" id="Using-the-Chebyshev-interpolant-1" href="#Using-the-Chebyshev-interpolant-1">Using the Chebyshev interpolant</a></h3><p>We can evaluate the interpolation at a point x ∈ d just by calling fc(x). Since we only used 10 points, it is not accurate to machine precision, but it is still pretty accurate:</p><pre><code class="language-julia">fc(0.2) - f(0.2)
1.3975267609822595e-9</code></pre><p>We can compute the derivative at an arbitrary point simply by fc&#39;(x), which will give us a good approximation for the exact derivative 2*exp(2x):</p><pre><code class="language-julia">fc&#39;(0.2) - 2*exp(2*0.2)
5.5879429972094385e-9</code></pre><footer><hr/><a class="previous" href="spaces.html"><span class="direction">Previous</span><span class="title">Spaces</span></a><a class="next" href="../faq.html"><span class="direction">Next</span><span class="title">Frequently Asked Questions</span></a></footer></article></body></html>
